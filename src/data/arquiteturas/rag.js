export const arquiteturaRAG = {
  id: 'rag',
  nome: 'RAG - Retrieval-Augmented Generation',
  descricao:
    'Arquitetura que combina recuperação de documentos relevantes com geração de texto por LLM, ideal para sistemas que precisam de contexto específico e atualizado.',
  nivel: 'intermediario',
  custoEstimado: 'medio',
  complexidade: 'media',
  tempoImplementacao: '2-4 semanas',

  // Nós do diagrama React Flow
  nodes: [
    {
      id: '1',
      type: 'custom',
      position: { x: 50, y: 100 },
      data: {
        label: 'Usuário / Query',
        tipo: 'entrada',
        descricao: 'Pergunta ou solicitação do usuário',
        metricas: ['Taxa de entrada', 'Tipos de query'],
        ferramentas: ['API Gateway', 'WebSocket'],
        riscos: ['Queries malformadas', 'Rate limiting'],
        entregas: ['Interface documentada', 'Validação de entrada'],
      },
    },
    {
      id: '2',
      type: 'custom',
      position: { x: 300, y: 100 },
      data: {
        label: 'Query Processing',
        tipo: 'processamento',
        descricao: 'Processamento e expansão da query original',
        metricas: ['Latência de processamento', 'Taxa de sucesso'],
        ferramentas: ['Query rewriting', 'NER', 'Intent classification'],
        riscos: ['Perda de contexto', 'Latência adicional'],
        entregas: ['Query processada', 'Metadados extraídos'],
      },
    },
    {
      id: '3',
      type: 'custom',
      position: { x: 550, y: 100 },
      data: {
        label: 'Embedding Model',
        tipo: 'processamento',
        descricao: 'Conversão da query em vetor de embeddings',
        metricas: ['Dimensionalidade', 'Throughput', 'Latência'],
        ferramentas: ['OpenAI Embeddings', 'Sentence Transformers', 'Cohere'],
        riscos: ['Custo de API', 'Latência', 'Qualidade do embedding'],
        entregas: ['Vetor de query', 'Modelo escolhido'],
      },
    },
    {
      id: '4',
      type: 'custom',
      position: { x: 50, y: 300 },
      data: {
        label: 'Ingestão de Dados',
        tipo: 'entrada',
        descricao: 'Coleta e pré-processamento de documentos',
        metricas: ['Volume de docs', 'Taxa de ingestão', 'Qualidade'],
        ferramentas: ['Apache Airflow', 'Fivetran', 'Custom ETL'],
        riscos: ['Qualidade de dados', 'Escalabilidade', 'Duplicação'],
        entregas: ['Pipeline documentado', 'Dados validados'],
      },
    },
    {
      id: '5',
      type: 'custom',
      position: { x: 300, y: 300 },
      data: {
        label: 'Document Processing',
        tipo: 'processamento',
        descricao: 'Chunking e limpeza de documentos',
        metricas: ['Tamanho de chunks', 'Overlap', 'Qualidade'],
        ferramentas: ['LangChain', 'LlamaIndex', 'Custom splitters'],
        riscos: ['Chunks muito grandes/pequenos', 'Perda de contexto'],
        entregas: ['Chunks processados', 'Metadados preservados'],
      },
    },
    {
      id: '6',
      type: 'custom',
      position: { x: 550, y: 300 },
      data: {
        label: 'Document Embedding',
        tipo: 'processamento',
        descricao: 'Conversão de chunks em vetores',
        metricas: ['Throughput', 'Custo por chunk', 'Consistência'],
        ferramentas: ['Batch processing', 'OpenAI', 'Hugging Face'],
        riscos: ['Custo elevado', 'Tempo de processamento'],
        entregas: ['Vetores gerados', 'Índice criado'],
      },
    },
    {
      id: '7',
      type: 'custom',
      position: { x: 800, y: 200 },
      data: {
        label: 'Vector Database',
        tipo: 'armazenamento',
        descricao: 'Armazenamento e busca de embeddings',
        metricas: ['Recall@k', 'Latência de busca', 'Throughput'],
        ferramentas: ['Pinecone', 'Weaviate', 'Qdrant', 'Chroma'],
        riscos: ['Custo de armazenamento', 'Performance de busca'],
        entregas: ['Índice otimizado', 'Benchmarks de busca'],
      },
    },
    {
      id: '8',
      type: 'custom',
      position: { x: 1050, y: 100 },
      data: {
        label: 'Retrieval & Re-ranking',
        tipo: 'processamento',
        descricao: 'Recuperação e reordenação de chunks relevantes',
        metricas: ['Precision@k', 'Recall@k', 'MRR'],
        ferramentas: ['Semantic search', 'Cross-encoder', 'Hybrid search'],
        riscos: ['Documentos irrelevantes', 'Latência adicional'],
        entregas: ['Top-k documentos', 'Scores de relevância'],
      },
    },
    {
      id: '9',
      type: 'custom',
      position: { x: 1300, y: 100 },
      data: {
        label: 'Prompt Builder',
        tipo: 'processamento',
        descricao: 'Construção do prompt com contexto recuperado',
        metricas: ['Tamanho do prompt', 'Token count'],
        ferramentas: ['Template engine', 'Context compression'],
        riscos: ['Contexto muito longo', 'Perda de informação'],
        entregas: ['Prompt estruturado', 'Templates validados'],
      },
    },
    {
      id: '10',
      type: 'custom',
      position: { x: 1550, y: 100 },
      data: {
        label: 'LLM',
        tipo: 'processamento',
        descricao: 'Geração de resposta pelo modelo de linguagem',
        metricas: ['Latência', 'Custo por token', 'Qualidade'],
        ferramentas: ['OpenAI GPT-4', 'Anthropic Claude', 'Llama'],
        riscos: ['Alucinações', 'Custo elevado', 'Latência'],
        entregas: ['Resposta gerada', 'Metadados de geração'],
      },
    },
    {
      id: '11',
      type: 'custom',
      position: { x: 1800, y: 100 },
      data: {
        label: 'Response Processing',
        tipo: 'processamento',
        descricao: 'Pós-processamento e validação da resposta',
        metricas: ['Faithfulness', 'Groundedness'],
        ferramentas: ['Fact checking', 'Citation extraction'],
        riscos: ['Informações incorretas', 'Falta de citações'],
        entregas: ['Resposta validada', 'Citações adicionadas'],
      },
    },
    {
      id: '12',
      type: 'custom',
      position: { x: 2050, y: 100 },
      data: {
        label: 'Resposta ao Usuário',
        tipo: 'saida',
        descricao: 'Entrega da resposta final ao usuário',
        metricas: ['Tempo total', 'Satisfação do usuário'],
        ferramentas: ['API response', 'Streaming'],
        riscos: ['Timeout', 'Formato incorreto'],
        entregas: ['Resposta formatada', 'Feedback coletado'],
      },
    },
    {
      id: '13',
      type: 'custom',
      position: { x: 1300, y: 300 },
      data: {
        label: 'Observabilidade',
        tipo: 'monitoramento',
        descricao: 'Monitoramento e logging de todo o pipeline',
        metricas: ['Latência E2E', 'Custo total', 'Taxa de erro'],
        ferramentas: ['Datadog', 'Prometheus', 'LangSmith'],
        riscos: ['Custos de observabilidade', 'Overhead de performance'],
        entregas: ['Dashboards', 'Alertas configurados'],
      },
    },
  ],

  // Conexões
  edges: [
    { id: 'e1-2', source: '1', target: '2', type: 'smoothstep', animated: true },
    { id: 'e2-3', source: '2', target: '3', type: 'smoothstep', animated: true },
    { id: 'e3-7', source: '3', target: '7', type: 'smoothstep', animated: true },
    { id: 'e4-5', source: '4', target: '5', type: 'smoothstep' },
    { id: 'e5-6', source: '5', target: '6', type: 'smoothstep' },
    { id: 'e6-7', source: '6', target: '7', type: 'smoothstep' },
    { id: 'e7-8', source: '7', target: '8', type: 'smoothstep', animated: true },
    { id: 'e8-9', source: '8', target: '9', type: 'smoothstep', animated: true },
    { id: 'e9-10', source: '9', target: '10', type: 'smoothstep', animated: true },
    { id: 'e10-11', source: '10', target: '11', type: 'smoothstep', animated: true },
    { id: 'e11-12', source: '11', target: '12', type: 'smoothstep', animated: true },
    {
      id: 'e13-all',
      source: '13',
      target: '10',
      type: 'straight',
      style: { strokeDasharray: '5,5', stroke: '#94a3b8' },
      label: 'Monitoring',
    },
  ],

  // Metadata para recomendações
  casosDeUso: [
    'FAQ/Chatbot com conhecimento específico da empresa',
    'Documentação técnica assistida',
    'Análise de contratos e documentos legais',
    'Suporte ao cliente com base em manuais',
  ],

  prerequisitos: {
    dados: 'Documentos estruturados ou semi-estruturados em quantidade significativa',
    time: 'Engenheiro de dados + ML Engineer + Backend developer',
    orcamento: 'Médio ($500-5000/mês para APIs e infraestrutura)',
  },

  vantagens: [
    'Respostas baseadas em dados atualizados',
    'Reduz alucinações ao fornecer contexto',
    'Não requer fine-tuning de modelos',
    'Facilmente escalável',
  ],

  desvantagens: [
    'Latência adicional devido à busca',
    'Custo de embedding e armazenamento vetorial',
    'Complexidade na configuração de chunking',
    'Dependência da qualidade dos dados',
  ],
};

